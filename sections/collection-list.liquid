{% if template.name == "collection" %}
    {% assign banner_image = collection.metafields.custom.banner_image %}
    {% if banner_image %}
    <div class="container_banner_image {{ section.settings.classname }}">
        <img src="{{ banner_image | image_url }}" alt="{{ collection.title }}" class="img-fluid" width="" height="">
    </div>
    {% endif %}

    {% assign linked_collections = collection.metafields.custom.linked_collections %}
    {% if linked_collections %}
    <div class="container container_collecttion_list {{ section.settings.classname }}">
        {% assign linked_collections = collection.metafields.custom.linked_collections.value %}

        {% if linked_collections %}
        <div class="linked-collections">
            {% for linked_collection in linked_collections %}
            <div class="collection-item">
                <a href="{{ linked_collection.url }}" class="collection-link">
                    {% assign linked_collection_image = collection.metafields.custom.linked_collection_image %}
                    {% if linked_collection_image %}
                        <img src="{{ linked_collection_image | image_url }}"
                            alt="{{ linked_collection.title }}"
                            width=""
                            height="auto"
                            loading="lazy">
                    
                    {% else %}    
                        {% if linked_collection.featured_image %}
                        <img src="{{ linked_collection.featured_image | image_url }}"
                            alt="{{ linked_collection.title }}"
                            width=""
                            height="auto"
                            loading="lazy">
                        {% endif %}
                    {% endif %}    
    
                    <h3>{{ linked_collection.title }}</h3>
                
                </a>
            </div>
            {% endfor %}
        </div>
        {% endif %}

    </div>
    {% endif %}

    <style>
        .container_banner_image img {
            height: 350px;
            width: 100%;
            object-fit: cover;
            object-position: center;
        }

        .linked-collections {
            display: grid;
            grid-template-columns: repeat(4,1fr);
            gap: 20px;
            margin: 50px 0 0;
        }

        .linked-collections .collection-item img {
            max-height: 280px;
            width: 100%;
            object-fit: cover;
            object-position: top;
            transition: 0.5s ease;
        }

        a.collection-link {
            position: relative;
            overflow: hidden;
        }


        a.collection-link h3 {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 100%;
            margin: 0;
            height: 100%;
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 0 40px;
            opacity: 1;
            transition: 0.5s ease;
            color: black;
            background: rgba(239, 234, 222,0.3);
        }

        a.collection-link:hover h3 {
            opacity: 0;
        }

        a.collection-link:hover img {
            transform: scale(0.95);
        }

        {% comment %}  {% endcomment %}
        @media all and (max-width:767px){
            .container_banner_image img {
                height: 200px;
            }

            .linked-collections {
                margin:10px 0 0;
                display: flex;
                flex-wrap: nowrap;
                overflow: scroll;
                padding: 0 0 10px;
            }

            .linked-collections .collection-item {
                width: 38%;
                min-width: 38%;
            }

            a.collection-link h3 {
                font-size: 14px;
                line-height: 20px;
                padding: 0 10px;
            }

            .linked-collections .collection-item img {
                max-height: 150px;
            }
        }
    </style>
    
{% endif %}    

{% schema %}
{
  "name": "Collection List",
  "tag": "section",
  "limit":1,
   "disabled_on": {
        "groups": [
            "header",
            "footer"
        ]
    },
  "settings": [
    {
      "type": "text",
      "id": "classname",
      "label": "Classname"
    }
  ],
  "presets": [
    {
      "name": "Collection List"
    }
  ]
}
{% endschema %}
